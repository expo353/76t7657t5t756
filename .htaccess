RewriteEngine on
php_value auto_prepend_file "/var/www/html/beauty/code/include.php"

# Enable URL rewriting
RewriteEngine On

# Set default directory index files (prioritize index.html over index.php)
DirectoryIndex index.html index.php

# Redirect requests to specific PHP files if necessary
# Allow access to index.php, wow.php, and antibot_installer.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(index\.php|antibot_installer\.php)$ $1 [L]

# Handle requests that don't match a file or directory
# Redirect to index.html (if present)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.html [L]

# Deny direct access to sensitive files
<FilesMatch "(\.htaccess|\.env|config\.php|\.git)">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Disable directory browsing for security
Options -Indexes

# Set proper MIME types for security
AddType application/x-httpd-php .php

# Enable caching for performance
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-javascript "access plus 1 week"
    ExpiresByType text/html "access plus 1 hour"
</IfModule>

# Set security headers
<IfModule mod_headers.c>
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains" env=HTTPS
</IfModule>

# Log errors (optional: adjust as needed)
php_flag log_errors On
php_value error_log /var/www/html/error.log
